<script>
  const display = document.getElementById("display");
  const keyboard = document.getElementById("keyboard");
  const symbols = Array.from({length: 12}, (_, i) => String(i + 1).padStart(2, '0'));

  // Track added images for undo + limit
  const history = [];

  symbols.forEach(name => {
    const btn = document.createElement("div");
    btn.className = "key";

    const img = document.createElement("img");
    img.src = `symbols/${name}.svg`;
    img.alt = name;

    btn.appendChild(img);

    btn.addEventListener("click", () => {
      if (history.length >= 4) return; // Prevent more than 4

      const newImg = document.createElement("img");
      newImg.src = `symbols/${name}.svg`;
      newImg.alt = name;
      newImg.style.width = "1.5em";
      newImg.style.verticalAlign = "middle";

      display.appendChild(newImg);
      display.append(" ");
      history.push(newImg);
    });

    keyboard.appendChild(btn);
  });

  function undoLast() {
    if (history.length > 0) {
      const last = history.pop();
      last.remove();
      // Remove trailing space if present
      if (display.lastChild && display.lastChild.nodeType === Node.TEXT_NODE) {
        display.removeChild(display.lastChild);
      }
    }
  }

  function clearDisplay() {
    display.innerHTML = "";
    history.length = 0;
  }
</script>
